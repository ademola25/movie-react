{"ast":null,"code":"import _defineProperty from\"/Users/mac/Desktop/movie-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/mac/Desktop/movie-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/Desktop/movie-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mac/Desktop/movie-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mac/Desktop/movie-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mac/Desktop/movie-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from'react';import{API_URL,API_KEY}from'../../config';import Navigation from'../elements/Navigation/Navigation';import MovieInfo from'../elements/MovieInfo/MovieInfo';import MovieInfoBar from'../elements/MovieInfoBar/MovieInfoBar';import FourColGrid from'../elements/FourColGrid/FourColGrid.js';import Actor from'../elements/Actor/Actor';import Spinner from'../elements/Spinner/Spinner';import'./Movie.css';var Movie=/*#__PURE__*/function(_Component){_inherits(Movie,_Component);function Movie(){var _getPrototypeOf2;var _this;_classCallCheck(this,Movie);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Movie)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={movie:null,actors:null,directors:[],loading:false};_this.fetchItems=function(endpoint){// ES6 destructuring the props\nvar movieId=_this.props.match.params.movieId;fetch(endpoint).then(function(result){return result.json();}).then(function(result){if(result.status_code){// If we don't find any movie\n_this.setState({loading:false});}else{_this.setState({movie:result},function(){// ... then fetch actors in the setState callback function\nvar endpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"/credits?api_key=\").concat(API_KEY);fetch(endpoint).then(function(result){return result.json();}).then(function(result){var directors=result.crew.filter(function(member){return member.job===\"Director\";});_this.setState({actors:result.cast,directors:directors,loading:false},function(){localStorage.setItem(\"\".concat(movieId),JSON.stringify(_this.state));});});});}}).catch(function(error){return console.error('Error:',error);});};return _this;}_createClass(Movie,[{key:\"componentDidMount\",value:function componentDidMount(){// ES6 destructuring the props\nvar movieId=this.props.match.params.movieId;if(localStorage.getItem(\"\".concat(movieId))){var state=JSON.parse(localStorage.getItem(\"\".concat(movieId)));this.setState(_objectSpread({},state));}else{this.setState({loading:true});// First fetch the movie ...\nvar endpoint=\"\".concat(API_URL,\"movie/\").concat(movieId,\"?api_key=\").concat(API_KEY,\"&language=en-US\");this.fetchItems(endpoint);}}},{key:\"render\",value:function render(){// ES6 Destructuring the props and state\nvar movieName=this.props.location.movieName;var _this$state=this.state,movie=_this$state.movie,directors=_this$state.directors,actors=_this$state.actors,loading=_this$state.loading;return React.createElement(\"div\",{className:\"rmdb-movie\"},movie?React.createElement(\"div\",null,React.createElement(Navigation,{movie:movieName}),React.createElement(MovieInfo,{movie:movie,directors:directors}),React.createElement(MovieInfoBar,{time:movie.runtime,budget:movie.budget,revenue:movie.revenue})):null,actors?React.createElement(\"div\",{className:\"rmdb-movie-grid\"},React.createElement(FourColGrid,{header:'Actors'},actors.map(function(element,i){return React.createElement(Actor,{key:i,actor:element});}))):null,!actors&&!loading?React.createElement(\"h1\",null,\"No movie found\"):null,loading?React.createElement(Spinner,null):null);}}]);return Movie;}(Component);export default Movie;","map":{"version":3,"sources":["/Users/mac/Desktop/movie-react/src/components/Movie/Movie.js"],"names":["React","Component","API_URL","API_KEY","Navigation","MovieInfo","MovieInfoBar","FourColGrid","Actor","Spinner","Movie","state","movie","actors","directors","loading","fetchItems","endpoint","movieId","props","match","params","fetch","then","result","json","status_code","setState","crew","filter","member","job","cast","localStorage","setItem","JSON","stringify","catch","error","console","getItem","parse","movieName","location","runtime","budget","revenue","map","element","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { API_URL, API_KEY } from '../../config';\nimport Navigation from '../elements/Navigation/Navigation';\nimport MovieInfo from '../elements/MovieInfo/MovieInfo';\nimport MovieInfoBar from '../elements/MovieInfoBar/MovieInfoBar';\nimport FourColGrid from '../elements/FourColGrid/FourColGrid.js';\nimport Actor from '../elements/Actor/Actor';\nimport Spinner from '../elements/Spinner/Spinner';\nimport './Movie.css';\n\nclass Movie extends Component {\n  state = {\n    movie: null,\n    actors: null,\n    directors: [],\n    loading: false\n  }\n\n  componentDidMount() {\n    // ES6 destructuring the props\n    const { movieId } = this.props.match.params;\n\n    if (localStorage.getItem(`${movieId}`)) {\n      let state = JSON.parse(localStorage.getItem(`${movieId}`))\n      this.setState({ ...state })\n    } else {\n      this.setState({ loading: true })\n      // First fetch the movie ...\n      let endpoint = `${API_URL}movie/${movieId}?api_key=${API_KEY}&language=en-US`;\n      this.fetchItems(endpoint);\n    }\n  }\n\n  fetchItems = (endpoint) => {\n    // ES6 destructuring the props\n    const { movieId } = this.props.match.params;\n\n    fetch(endpoint)\n    .then(result => result.json())\n    .then(result => {\n\n      if (result.status_code) {\n        // If we don't find any movie\n        this.setState({ loading: false });\n      } else {\n        this.setState({ movie: result }, () => {\n          // ... then fetch actors in the setState callback function\n          let endpoint = `${API_URL}movie/${movieId}/credits?api_key=${API_KEY}`;\n          fetch(endpoint)\n          .then(result => result.json())\n          .then(result => {\n\n            const directors = result.crew.filter( (member) => member.job === \"Director\");\n\n            this.setState({\n              actors: result.cast,\n              directors,\n              loading: false\n            }, () => {\n              localStorage.setItem(`${movieId}`, JSON.stringify(this.state));\n            })\n          })\n        })\n      }\n    })\n    .catch(error => console.error('Error:', error))\n  }\n\n  render() {\n    // ES6 Destructuring the props and state\n    const { movieName } = this.props.location;\n    const { movie, directors, actors, loading } = this.state;\n\n    return (\n      <div className=\"rmdb-movie\">\n        {movie ?\n        <div>\n          <Navigation movie={movieName} />\n          <MovieInfo movie={movie} directors={directors} />\n          <MovieInfoBar time={movie.runtime} budget={movie.budget} revenue={movie.revenue} />\n        </div>\n        : null }\n        {actors ?\n        <div className=\"rmdb-movie-grid\">\n          <FourColGrid header={'Actors'}>\n            {actors.map( (element, i) => (\n              <Actor key={i} actor={element} />\n            ))}\n          </FourColGrid>\n        </div>\n        : null }\n        {!actors && !loading ? <h1>No movie found</h1> : null }\n        {loading ? <Spinner /> : null}\n      </div>\n    )\n  }\n}\n\nexport default Movie;"]},"metadata":{},"sourceType":"module"}